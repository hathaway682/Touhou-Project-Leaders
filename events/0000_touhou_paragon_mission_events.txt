namespace = touhou_paragon_mission

#早苗任务树
country_event = {
	id = touhou_paragon_mission.40301
	title = touhou_paragon_mission.40301.name
	desc = touhou_paragon_mission.40301.desc
	picture = GFX_evt_sanae_mission
	show_sound = event_default
	is_triggered_only = yes
	fire_only_once = yes
	event_chain = touhou_sanae_mission_chain
	trigger = {
		any_owned_leader = {
			has_trait = thl_leader_trait_miracle
		}
	}
	option = {
		name = touhou_paragon_mission.40301.a
		begin_event_chain = {
			event_chain = "touhou_sanae_mission_chain"
			target = ROOT
		}
		hidden_effect = {
			set_country_flag = touhou_sanae_mission_chain
			create_point_of_interest = {
				id = touhou_sanae_mission_chain_adm.1
				name = "touhou_sanae_mission_chain_adm_name"
				desc = "touhou_sanae_mission_chain_adm_1_desc"
				event_chain = "touhou_sanae_mission_chain"
			}
			create_point_of_interest = {
				id = touhou_sanae_mission_chain_mil.1
				name = "touhou_sanae_mission_chain_mil_name"
				desc = "touhou_sanae_mission_chain_mil_1_desc"
				event_chain = "touhou_sanae_mission_chain"
			}
			create_point_of_interest = {
				id = touhou_sanae_mission_chain_tech.1
				name = "touhou_sanae_mission_chain_tech_name"
				desc = "touhou_sanae_mission_chain_tech_1_desc"
				event_chain = "touhou_sanae_mission_chain"
			}
			create_point_of_interest = {
				id = touhou_sanae_mission_chain_faith.1
				name = "touhou_sanae_mission_chain_faith_name"
				desc = "touhou_sanae_mission_chain_faith_1_desc"
				event_chain = "touhou_sanae_mission_chain"
			}
		}
	}
	option = {
		name = touhou_paragon_mission.40301.b
		custom_tooltip =  touhou_paragon_mission.40301.b.tooltip
	}
}

country_event = {
	id = touhou_paragon_mission.40302
	title = touhou_paragon_mission.40302.name
	desc = touhou_paragon_mission.40302.desc
	picture = GFX_evt_sanae_mission
	show_sound = event_default
	is_triggered_only = yes
	fire_only_once = yes
	event_chain = touhou_sanae_mission_chain
	trigger = {
		has_point_of_interest = {
			poi = touhou_sanae_mission_chain_adm.1
		}
		any_owned_planet = {
			is_colony = yes
			or = {
				has_modifier = modifier_miracle_1
				has_modifier = modifier_miracle_2
				has_modifier = modifier_miracle_3
				has_modifier = modifier_miracle_4
				has_modifier = modifier_miracle_5
				has_modifier = modifier_miracle_6
			}
		}
	}
	option = {
		name = touhou_paragon_mission.40302.a
		add_monthly_resource_mult = {
			resource = unity
			value = 6
		}
		add_monthly_resource_mult = {
			resource = food
			value = 3
		}
		hidden_effect = {
			update_sanae_phase_trait = yes
			remove_point_of_interest = touhou_sanae_mission_chain_adm.1
			create_point_of_interest = {
				id = touhou_sanae_mission_chain_adm.2
				name = "touhou_sanae_mission_chain_adm_name"
				desc = "touhou_sanae_mission_chain_adm_2_desc"
				event_chain = "touhou_sanae_mission_chain"
			}

		}
	}
}

country_event = {
	id = touhou_paragon_mission.40303
	title = touhou_paragon_mission.40303.name
	desc = touhou_paragon_mission.40303.desc
	picture = GFX_evt_sanae_mission
	show_sound = event_default
	is_triggered_only = yes
	fire_only_once = yes
	event_chain = touhou_sanae_mission_chain
	trigger = {
		has_point_of_interest = {
			poi = touhou_sanae_mission_chain_mil.1
		}
		OR = {
			used_naval_capacity_percent >= 0.85
			max_naval_capacity >= 2000
		}
		#check_variable_arithmetic = {
		#	which = used_naval_capacity_integer
		#	divide = max_naval_capacity
		#	value > 0.9
		#}
	}
	option = {
		name = touhou_paragon_mission.40303.a
		every_owned_leader = {
			if = {
				limit = {
					has_trait = thl_leader_trait_miracle
				}
				add_trait = { trait = leader_trait_touhou_fleet_logistician }
			}
		}
		hidden_effect = {
			update_sanae_phase_trait = yes
			remove_point_of_interest = touhou_sanae_mission_chain_mil.1
			create_point_of_interest = {
				id = touhou_sanae_mission_chain_mil.2
				name = "touhou_sanae_mission_chain_mil_name"
				desc = "touhou_sanae_mission_chain_mil_2_desc"
				event_chain = "touhou_sanae_mission_chain"
			}
		}
	}
}

country_event = {
	id = touhou_paragon_mission.40304
	title = touhou_paragon_mission.40304.name
	desc = touhou_paragon_mission.40304.desc
	picture = GFX_evt_sanae_mission
	show_sound = event_default
	is_triggered_only = yes
	#fire_only_once = yes
	event_chain = touhou_sanae_mission_chain
	trigger = {
		has_point_of_interest = {
			poi = touhou_sanae_mission_chain_tech.1
		}
		OR = {
			AND = {
				NOR = {
					has_ethic = "ethic_gestalt_consciousness"
					is_individual_machine = yes
				}
				count_owned_pop_amount = {
					limit = {
						has_trait = trait_mechanical
					}
					count >= 500
				}
			}
			AND = {
				OR = {
					is_individual_machine = yes
					is_machine_empire = yes
				}
				count_owned_pop_amount = {
					limit = {
						has_trait = trait_machine_unit
					}
					count >= 7500
				}
			}
			AND = {
				is_gestalt = yes
				is_machine_empire = no
			}
		}
	}
	option = {
		trigger = {
			NOR = {
				has_ethic = "ethic_gestalt_consciousness"
				is_individual_machine = yes
			}
		}
		name = touhou_paragon_mission.40304.a
		add_modifier = {
			modifier = modifier_sanae_mission_tech_1
		}
		if = {
			limit = {
				NOT = {
					has_technology = tech_robotic_workers
				}
			}
			add_tech_progress = {
				tech = tech_robotic_workers
				progress = 0.25
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_technology = tech_droid_workers
				}
			}
			add_tech_progress = {
				tech = tech_droid_workers
				progress = 0.25
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_technology = tech_synthetic_workers
				}
			}
			add_tech_progress = {
				tech = tech_synthetic_workers
				progress = 0.25
			}
		}
		else = {
			add_monthly_resource_mult = {
				resource = engineering_research
				value = @tier2researchreward
				min = @tier2researchmin
				max = @tier2researchmax
			}
		}
		hidden_effect = {
			update_sanae_phase_trait = yes
			remove_point_of_interest = touhou_sanae_mission_chain_tech.1
			create_point_of_interest = {
				id = touhou_sanae_mission_chain_tech.2
				name = "touhou_sanae_mission_chain_tech_name"
				desc = "touhou_sanae_mission_chain_tech_2_desc"
				event_chain = "touhou_sanae_mission_chain"
			}
		}
	}
	option = {
		trigger = {
			AND = {
				has_ethic = "ethic_gestalt_consciousness"
			}
		}
		name = touhou_paragon_mission.40304.b
		if = {
			limit = {
				is_machine_empire = yes
				NOT = {
					has_technology = tech_robomodding_m
				}
			}
			add_tech_progress = {
				tech = tech_robomodding_m
				progress = 0.25
			}
		}
		else = {
			add_monthly_resource_mult = {
				resource = engineering_research
				value = @tier2researchreward
				min = @tier2researchmin
				max = @tier2researchmax
			}
		}
		hidden_effect = {
			update_sanae_phase_trait = yes
			remove_point_of_interest = touhou_sanae_mission_chain_tech.1
			create_point_of_interest = {
				id = touhou_sanae_mission_chain_tech.2
				name = "touhou_sanae_mission_chain_tech_name"
				desc = "touhou_sanae_mission_chain_tech_2_desc"
				event_chain = "touhou_sanae_mission_chain"
			}
		}
	}
}

country_event = {
	id = touhou_paragon_mission.40305
	title = touhou_paragon_mission.40305.name
	desc = touhou_paragon_mission.40305.desc
	picture = GFX_evt_sanae_mission
	show_sound = event_default
	is_triggered_only = yes
	fire_only_once = yes
	event_chain = touhou_sanae_mission_chain
	trigger = {
		has_point_of_interest = {
			poi = touhou_sanae_mission_chain_faith.1
		}
		any_owned_planet = {
			moriya_faith_trigger = yes
		}
	}
	option = {
		name = touhou_paragon_mission.40305.a
		if = {
			limit = {
				is_gestalt = no
			}
			every_owned_leader = {
				limit = {
					has_trait = thl_leader_trait_miracle
				}
				add_trait = { trait = trait_ruler_architectural_sense }
			}
		}
		else_if = {
			limit = {
				is_gestalt = yes
			}
			every_owned_leader = {
				limit = {
					is_gestalt_node = yes
					has_trait = subclass_official_economy_councilor
				}
				add_trait = trait_ruler_architectural_sense
			}
		}
		add_resource = {
			rare_crystals = 200
		}
		hidden_effect = {
			update_sanae_phase_trait = yes
			remove_point_of_interest = touhou_sanae_mission_chain_faith.1
			create_point_of_interest = {
				id = touhou_sanae_mission_chain_faith.2
				name = "touhou_sanae_mission_chain_faith_name"
				desc = "touhou_sanae_mission_chain_faith_2_desc"
				event_chain = "touhou_sanae_mission_chain"
			}
		}
	}
}

country_event = {
	id = touhou_paragon_mission.40306
	title = touhou_paragon_mission.40306.name
	desc = touhou_paragon_mission.40306.desc
	picture = GFX_evt_sanae_mission
	show_sound = event_default
	is_triggered_only = yes
	fire_only_once = yes
	event_chain = touhou_sanae_mission_chain
	trigger = {
		has_point_of_interest = {
			poi = touhou_sanae_mission_chain_adm.2
		}
		OR = {
			AND = {
				country_uses_bio_ships = yes
				has_monthly_income = {
					resource = food
					value >= 600
				}
			}
			AND = {
				country_uses_bio_ships = no
				has_monthly_income = {
					resource = alloys
					value >= 150
				}
			}
		}
	}
	option = {
		name = touhou_paragon_mission.40306.a
		hidden_effect = {
			every_owned_leader = {
				if = {
					limit = {
						has_trait = thl_leader_trait_miracle
					}
					set_leader_flag = thl_flag_mission_augment_alloy_production
				}
			}
		}
		add_resource = {
			alloys = 1000
		}
		custom_tooltip = touhou_tooltip_mission_augment_alloy_production
	}

	option = {
		name = touhou_paragon_mission.40306.c
		allow = {
			country_uses_bio_ships = yes
		}
		hidden_effect = {
			every_owned_leader = {
				if = {
					limit = {
						has_trait = thl_leader_trait_miracle
					}
					set_leader_flag = thl_flag_mission_augment_alloy_production_food
				}
			}
		}
		add_resource = {
			food = 3000
		}
		custom_tooltip = touhou_tooltip_mission_augment_alloy_production_food
	}
	after = {
		hidden_effect = {
			update_sanae_phase_trait = yes
			remove_point_of_interest = touhou_sanae_mission_chain_adm.2
			create_point_of_interest = {
				id = touhou_sanae_mission_chain_adm.3
				name = "touhou_sanae_mission_chain_adm_name"
				desc = "touhou_sanae_mission_chain_adm_3_desc"
				event_chain = "touhou_sanae_mission_chain"
			}
		}
	}
}

country_event = {
	id = touhou_paragon_mission.40307
	title = touhou_paragon_mission.40307.name
	desc = touhou_paragon_mission.40307.desc
	picture = GFX_evt_sanae_mission
	show_sound = event_default
	is_triggered_only = yes
	fire_only_once = yes
	event_chain = touhou_sanae_mission_chain
	trigger = {
		has_point_of_interest = {
			poi = touhou_sanae_mission_chain_mil.2
		}
		or = {
			has_federation = yes
			count_subject = {
				count >= 3
			}
			any_spynetwork = {
				owner = { is_same_value = root }
				is_spynetwork_level > 60
			}
			num_defensive_pacts >= 3
		}
	}
	immediate = {
		set_country_flag = thl_flag_allow_foreign_affairs
	}
	option = {
		name = touhou_paragon_mission.40307.a
		allow = { has_federation = yes }
		set_policy = {
			policy = foreign_affairs_policy
			option = sanae_mission_mil_2_federation
		}
	}
	option = {
		name = touhou_paragon_mission.40307.b
		allow = {
			count_subject = {
				count >= 2
			}
		}
		set_policy = {
			policy = foreign_affairs_policy
			option = sanae_mission_mil_2_subjects
		}
	}
	option = {
		name = touhou_paragon_mission.40307.c
		allow = {
			any_spynetwork = {
				owner = { is_same_value = root }
				is_spynetwork_level > 10
			}
		}
		set_policy = {
			policy = foreign_affairs_policy
			option = sanae_mission_mil_2_intel
		}
	}
	option = {
		name = touhou_paragon_mission.40307.d
		allow = {
			num_defensive_pacts >= 2
		}
		set_policy = {
			policy = foreign_affairs_policy
			option = sanae_mission_mil_2_influence
		}
	}
	after = {
		hidden_effect = {
			update_sanae_phase_trait = yes
			remove_point_of_interest = touhou_sanae_mission_chain_mil.2
			create_point_of_interest = {
				id = touhou_sanae_mission_chain_mil.3
				name = "touhou_sanae_mission_chain_mil_name"
				desc = "touhou_sanae_mission_chain_mil_3_desc"
				event_chain = "touhou_sanae_mission_chain"
			}
		}
	}
}

country_event = {
	id = touhou_paragon_mission.40308
	title = touhou_paragon_mission.40308.name
	desc = touhou_paragon_mission.40308.desc
	picture = GFX_evt_sanae_mission
	show_sound = event_default
	is_triggered_only = yes
	fire_only_once = yes
	event_chain = touhou_sanae_mission_chain
	trigger = {
		has_point_of_interest = {
			poi = touhou_sanae_mission_chain_tech.2
		}
		OR = {
			AND = {
				any_owned_planet = {
					is_colony = yes
					num_assigned_jobs = {
						job = physicist
						value >= 500
					}
				}
				any_owned_planet = {
					is_colony = yes
					num_assigned_jobs = {
						job = engineer
						value >= 500
					}
				}
			}
			AND = {
				any_owned_planet = {
					is_colony = yes
					num_assigned_jobs = {
						job = brain_drone_physicist
						value >= 500
					}
				}
				any_owned_planet = {
					is_colony = yes
					num_assigned_jobs = {
						job = brain_drone_engineer
						value >= 500
					}
				}
			}
			AND = {
				any_owned_planet = {
					is_colony = yes
					num_assigned_jobs = {
						job = calculator_physicist
						value >= 500
					}
				}
				any_owned_planet = {
					is_colony = yes
					num_assigned_jobs = {
						job = calculator_engineer
						value >= 500
					}
				}
			}
		}
	}
	option = {
		name = touhou_paragon_mission.40308.a
		trigger = {
			is_gestalt = no
		}
		custom_tooltip = touhou_tooltip_mission_reduce_physicists_engineers_upkeep
		hidden_effect = {
			every_owned_leader = {
				if = {
					limit = {
						has_trait = thl_leader_trait_miracle
					}
					set_leader_flag = thl_flag_mission_reduce_physicists_engineers_upkeep
				}
			}
		}
	}
	option = {
		name = touhou_paragon_mission.40308.b
		trigger = {
			is_gestalt = yes
		}
		custom_tooltip = touhou_tooltip_mission_physicists_engineers_gestalt
		hidden_effect = {
			every_owned_leader = {
				if = {
					limit = {
						has_trait = thl_leader_trait_miracle
					}
					set_leader_flag = thl_flag_mission_reduce_physicists_engineers_upkeep
				}
			}
		}
	}
	after = {
		hidden_effect = {
			update_sanae_phase_trait = yes
			remove_point_of_interest = touhou_sanae_mission_chain_tech.2
			create_point_of_interest = {
				id = touhou_sanae_mission_chain_tech.3
				name = "touhou_sanae_mission_chain_tech_name"
				desc = "touhou_sanae_mission_chain_tech_3_desc"
				event_chain = "touhou_sanae_mission_chain"
			}
		}
	}
}

country_event = {
	id = touhou_paragon_mission.40309
	title = touhou_paragon_mission.40309.name
	desc = {
		trigger = { has_tradition = tr_psionics_finish }
		text = touhou_paragon_mission.40309.desc.psi
	}
	picture = GFX_evt_sanae_mission
	show_sound = event_default
	is_triggered_only = yes
	fire_only_once = yes
	event_chain = touhou_sanae_mission_chain
	trigger = {
		has_point_of_interest = {
			poi = touhou_sanae_mission_chain_faith.2
		}
		OR = {
			has_tradition = tr_psionics_breach_shroud
			has_tradition = tr_psionics_shroud_finish
		}
		any_owned_leader = {
			has_trait = thl_leader_trait_miracle
		}
	}
	option = {
		name = touhou_paragon_mission.40309.a
		add_modifier = {
			modifier = modifier_sanae_mission_faith_2_psionics
		}
	}
	after = {
		hidden_effect = {
			update_sanae_phase_trait = yes
			remove_point_of_interest = touhou_sanae_mission_chain_faith.2
			create_point_of_interest = {
				id = touhou_sanae_mission_chain_faith.3
				name = "touhou_sanae_mission_chain_faith_name"
				desc = "touhou_sanae_mission_chain_faith_3_desc"
				event_chain = "touhou_sanae_mission_chain"
			}
		}
	}
}

country_event = {
	id = touhou_paragon_mission.40398
	title = touhou_paragon_mission.40309.name
	desc = {
		trigger = {
			or = {
				has_tradition = tr_synthetics_finish
				has_tradition = tr_cybernetics_finish
				has_tradition = tr_genetics_finish
				has_tradition = tr_mutation_finish
				has_tradition = tr_purity_finish
				has_tradition = tr_cloning_finish
				has_tradition = tr_modularity_finish
				has_tradition = tr_nanotech_finish
				has_tradition = tr_virtuality_finish
			}
		}
		text = touhou_paragon_mission.40309.desc.notpsi
	}
	picture = GFX_evt_sanae_mission
	show_sound = event_default
	is_triggered_only = yes
	fire_only_once = yes
	event_chain = touhou_sanae_mission_chain
	trigger = {
		has_point_of_interest = {
			poi = touhou_sanae_mission_chain_faith.2
		}
		or = {
			has_tradition = tr_synthetics_finish
			has_tradition = tr_cybernetics_finish
			has_tradition = tr_genetics_finish
			has_tradition = tr_mutation_finish
			has_tradition = tr_purity_finish
			has_tradition = tr_cloning_finish
			has_tradition = tr_modularity_finish
			has_tradition = tr_nanotech_finish
			has_tradition = tr_virtuality_finish
		}
		From = {
			is_same_species = root.owner_main_species
		}
	}
	option = {
		name = touhou_paragon_mission.40309.b
		trigger = {
			or = {
				has_tradition = tr_synthetics_finish
				has_tradition = tr_cybernetics_finish
				has_tradition = tr_genetics_finish
				has_tradition = tr_mutation_finish
				has_tradition = tr_purity_finish
				has_tradition = tr_cloning_finish
				has_tradition = tr_modularity_finish
				has_tradition = tr_nanotech_finish
				has_tradition = tr_virtuality_finish
			}
		}
		every_owned_pop_group =  {
			limit = {
				is_same_species = root.owner_main_species
				species = {
					has_psionic_species_trait = no
				}
			}
			modify_species = {
				species = this
				add_trait = trait_latent_psionic
				effect = {
					save_event_target_as = psionic_main_species
				}
			}
		}
		change_dominant_species = { species = event_target:psionic_main_species }
	}
	after = {
		hidden_effect = {
			update_sanae_phase_trait = yes
			remove_point_of_interest = touhou_sanae_mission_chain_faith.2
			create_point_of_interest = {
				id = touhou_sanae_mission_chain_faith.3
				name = "touhou_sanae_mission_chain_faith_name"
				desc = "touhou_sanae_mission_chain_faith_3_desc"
				event_chain = "touhou_sanae_mission_chain"
			}
		}
	}
}

country_event = {
	id = touhou_paragon_mission.40310
	title = touhou_paragon_mission.40310.name
	desc = {
		text = touhou_paragon_mission.40310.desc.a
		trigger = { not = { has_ethic = ethic_fanatic_materialist } }
	}
	desc = {
		text = touhou_paragon_mission.40310.desc.b
		trigger = { has_ethic = ethic_fanatic_materialist }
	}
	picture = GFX_evt_sanae_mission
	show_sound = event_default
	is_triggered_only = yes
	fire_only_once = yes
	event_chain = touhou_sanae_mission_chain
	trigger = {
		has_point_of_interest = {
			poi = touhou_sanae_mission_chain_adm.3
		}
		count_owned_leader = {
			limit = {
				is_councilor = yes
				has_base_skill >= 8
			}
			count >= 5
		}
		OR = {
			any_owned_leader = {
				is_councilor = yes
				has_trait = thl_leader_trait_miracle
			}
			is_gestalt = yes
		}
	}
	option = {
		name = touhou_paragon_mission.40310.a
		add_modifier = {
			modifier =  modifier_sanae_mission_adm_3
		}
	}
	option = {
		name = touhou_paragon_mission.40310.b
		allow = {
			is_materialist = yes
		}
		add_modifier = {
			modifier =  modifier_sanae_mission_adm_3
		}
		every_owned_leader = {
			if = {
				limit = {
					has_trait = thl_leader_trait_miracle
				}
				change_background_ethic = ethic_materialist
			}
		}
	}
	after = {
		hidden_effect = {
			update_sanae_phase_trait = yes
			remove_point_of_interest = touhou_sanae_mission_chain_adm.3
			create_point_of_interest = {
				id = touhou_sanae_mission_chain_adm.4
				name = "touhou_sanae_mission_chain_adm_name"
				desc = "touhou_sanae_mission_chain_adm_4_desc"
				event_chain = "touhou_sanae_mission_chain"
			}
		}
	}
}

country_event = {
	id = touhou_paragon_mission.40311
	title = touhou_paragon_mission.40311.name
	desc = {
		text = touhou_paragon_mission.40311.desc
	}
	picture = GFX_evt_sanae_mission
	show_sound = event_default
	is_triggered_only = yes
	fire_only_once = yes
	event_chain = touhou_sanae_mission_chain
	trigger = {
		has_point_of_interest = {
			poi = touhou_sanae_mission_chain_mil.3
		}
		any_owned_ship = {
			ship_uses_battleship_components = yes
			fleet = {
				leader = {
					has_trait = thl_leader_trait_miracle
					has_leader_flag = touhou_flag_sanae_robotist_councilor_update_industry
				}
				fleet_size >= 180
			}
		}
	}
	option = {
		name = touhou_paragon_mission.40311.a
		custom_tooltip = touhou_paragon_mission.40311_tooltip.a
		create_fleet = {
			name = "NAME_Dreadnought"
			effect = {
				set_owner = root
				create_ship = {
					name = random
					design = "NAME_Type_37" # Psi Jump Dreadnought
					graphical_culture = "npf_01"
					upgradable = no
				}
				set_location = {
					target = root.capital_scope
					distance = 0
					angle = random
				}
			}
		}
		if = {
			limit = {
				not = {
					has_technology = tech_titans
				}
			}
			add_research_option = tech_titans
		}
		if = {
			limit = {
				not = {
					has_technology = tech_juggernaut
				}
			}
			add_research_option = tech_juggernaut
		}
	}
	option = {
		name = touhou_paragon_mission.40311.b
		trigger = {
			has_relic = r_war_forge
		}
		allow = {
			has_relic = r_war_forge
		}
		custom_tooltip = touhou_paragon_mission.40311_tooltip.b
		set_variable = {
			which = cybrex_count
			value = 20
		}
	}
	after = {
		random_owned_leader = {
			limit = {
				has_trait = thl_leader_trait_miracle
			}
			leader_event = { id = touhou_paragon.40311 }
		}
		hidden_effect = {
			update_sanae_phase_trait = yes
			remove_point_of_interest = touhou_sanae_mission_chain_mil.3
			create_point_of_interest = {
				id = touhou_sanae_mission_chain_mil.4
				name = "touhou_sanae_mission_chain_mil_name"
				desc = "touhou_sanae_mission_chain_mil_4_desc"
				event_chain = "touhou_sanae_mission_chain"
			}
		}
	}
}

country_event = {
	id = touhou_paragon_mission.40312
	title = touhou_paragon_mission.40312.name
	desc = {
		text = touhou_paragon_mission.40312.desc
	}
	picture = GFX_evt_sanae_mission
	show_sound = event_default
	is_triggered_only = yes
	fire_only_once = yes
	event_chain = touhou_sanae_mission_chain
	trigger = {
		has_point_of_interest = {
			poi = touhou_sanae_mission_chain_tech.3
		}
		check_modifier_value = {
			modifier = all_technology_research_speed
			value > 1.0
		}
	}
	option = {
		name = touhou_paragon_mission.40312.a
		set_country_flag = touhou_flag_sanae_shrine_research_speed
	}
	after = {
		hidden_effect = {
			update_sanae_phase_trait = yes
			remove_point_of_interest = touhou_sanae_mission_chain_tech.3
			create_point_of_interest = {
				id = touhou_sanae_mission_chain_tech.4
				name = "touhou_sanae_mission_chain_tech_name"
				desc = "touhou_sanae_mission_chain_tech_4_desc"
				event_chain = "touhou_sanae_mission_chain"
			}
		}
	}
}

country_event = {
	id = touhou_paragon_mission.40313
	title = touhou_paragon_mission.40313.name
	desc = {
		text = touhou_paragon_mission.40313.desc
	}
	picture = GFX_evt_sanae_mission
	show_sound = event_default
	is_triggered_only = yes
	fire_only_once = yes
	event_chain = touhou_sanae_mission_chain
	trigger = {
		has_point_of_interest = {
			poi = touhou_sanae_mission_chain_faith.3
		}
		num_ascension_perks >= 4
		has_monthly_income = {
			resource = unity
			value >= 2000
		}
	}
	option = {
		name = touhou_paragon_mission.40313.a
		every_owned_leader = {
			limit = {
				has_trait = thl_leader_trait_miracle
			}
			set_leader_flag = thl_flag_mission_order_faction
		}
		if = {
			limit = {
				is_gestalt = yes
			}
			add_modifier = {
				modifier = modifier_sanae_mission_faith_3_perk
			}
		}
	}
	after = {
		hidden_effect = {
			update_sanae_phase_trait = yes
			remove_point_of_interest = touhou_sanae_mission_chain_faith.3
			create_point_of_interest = {
				id = touhou_sanae_mission_chain_faith.4
				name = "touhou_sanae_mission_chain_faith_name"
				desc = "touhou_sanae_mission_chain_faith_4_desc"
				event_chain = "touhou_sanae_mission_chain"
			}
		}
	}
}

country_event = {
	id = touhou_paragon_mission.40314
	title = touhou_paragon_mission.40314.name
	desc = {
		text = touhou_paragon_mission.40314.desc
	}
	picture = GFX_evt_sanae_mission
	show_sound = event_default
	is_triggered_only = yes
	fire_only_once = yes
	event_chain = touhou_sanae_mission_chain
	trigger = {
		has_point_of_interest = {
			poi = touhou_sanae_mission_chain_adm.4
		}
		OR = {
			num_owned_active_gateways >= 6
			count_owned_megastructure = {
				limit = {
					is_megastructure_type = hyper_relay
				}
				count >= 30
			}
			any_owned_megastructure = {
				OR = {
					is_megastructure_type = quantum_catapult_3
					is_megastructure_type = quantum_catapult_restored
					is_megastructure_type = quantum_catapult_restored_slingshot
					is_megastructure_type = quantum_catapult_improved_slingshot
				}
			}
			check_modifier_value = {
				modifier = ship_ftl_jumpdrive_range_mult
				value >= 0.5
			}
		}
	}
	option = {
		name = touhou_paragon_mission.40314.a
		add_modifier = {
			modifier = modifier_sanae_mission_adm_4_eco
		}
		custom_tooltip = touhou_paragon_mission.40314.a.tooltip
		set_country_flag = flash_forge_hyper_relay_activated
	}
	option = {
		name = touhou_paragon_mission.40314.b
		add_modifier = {
			modifier = modifier_sanae_mission_adm_4_mil
		}
	}
	after = {
		hidden_effect = {
			update_sanae_phase_trait = yes
			remove_point_of_interest = touhou_sanae_mission_chain_adm.4
			create_point_of_interest = {
				id = touhou_sanae_mission_chain_adm.5
				name = "touhou_sanae_mission_chain_adm_name"
				desc = "touhou_sanae_mission_chain_adm_5_desc"
				event_chain = "touhou_sanae_mission_chain"
			}
		}
	}
}

country_event = {
	id = touhou_paragon_mission.40315
	title = touhou_paragon_mission.40315.name
	desc = {
		text = touhou_paragon_mission.40315.desc
	}
	picture = GFX_evt_sanae_mission
	show_sound = event_default
	is_triggered_only = yes
	fire_only_once = yes
	event_chain = touhou_sanae_mission_chain
	trigger = {
		this = {
			has_point_of_interest = {
				poi = touhou_sanae_mission_chain_mil.4
			}
		}
		fromfrom = {
			or = {
				count_ground_combat_attacker = {
					limit = {
						army_type = cybrex_warform
					}
					count >= 3
				}
				count_ground_combat_attacker = {
					limit = {
						army_type = sanae_warform
					}
					count >= 3
				}
				count_ground_combat_attacker = {
					count >= 20
				}
			}
			any_ground_combat_attacker = {
				exists = leader
				leader = {
					has_trait = thl_leader_trait_miracle
				}
			}
		}
	}
	option = {
		name = touhou_paragon_mission.40315.a
		random_owned_leader = {
			limit = {
				has_trait = thl_leader_trait_miracle
			}
			leader_event = { id = touhou_paragon.40312 }
		}
	}
	after = {
		hidden_effect = {
			update_sanae_phase_trait = yes
			remove_point_of_interest = touhou_sanae_mission_chain_mil.4
			create_point_of_interest = {
				id = touhou_sanae_mission_chain_mil.5
				name = "touhou_sanae_mission_chain_mil_name"
				desc = "touhou_sanae_mission_chain_mil_5_desc"
				event_chain = "touhou_sanae_mission_chain"
			}
		}
	}
}

country_event = {
	id = touhou_paragon_mission.40316
	title = touhou_paragon_mission.40316.name
	desc = {
		text = touhou_paragon_mission.40316.desc
	}
	picture = GFX_evt_sanae_mission
	show_sound = event_default
	is_triggered_only = yes
	fire_only_once = yes
	event_chain = touhou_sanae_mission_chain
	trigger = {
		has_point_of_interest = {
			poi = touhou_sanae_mission_chain_tech.4
		}
		count_owned_planet = {
			limit = {
				politician_is_science_director = yes
			}
			count >= 6
		}
	}
	option = {
		name = touhou_paragon_mission.40316.a
		every_owned_leader = {
			limit = {
				has_trait = thl_leader_trait_miracle
			}
			set_leader_flag = thl_flag_mission_technocracy_update
		}
		custom_tooltip = touhou_paragon_mission.40316.a.tooltip
	}
	option = {
		name = touhou_paragon_mission.40316.b
		allow = {
			any_owned_leader = {
				has_trait = thl_leader_trait_fly
			}
		}
		every_owned_leader = {
			limit = {
				has_trait = thl_leader_trait_miracle
			}
			set_leader_flag = thl_flag_mission_technocracy_update
		}
		every_owned_leader = {
			limit = {
				has_trait = thl_leader_trait_fly
			}
			add_trait = { trait = thl_leader_trait_fake_technocracy }
		}
		custom_tooltip = touhou_paragon_mission.40316.b.tooltip
	}
	after = {
		hidden_effect = {
			update_sanae_phase_trait = yes
			remove_point_of_interest = touhou_sanae_mission_chain_tech.4
			create_point_of_interest = {
				id = touhou_sanae_mission_chain_tech.5
				name = "touhou_sanae_mission_chain_tech_name"
				desc = "touhou_sanae_mission_chain_tech_5_desc"
				event_chain = "touhou_sanae_mission_chain"
			}
		}
	}
}

country_event = {
	id = touhou_paragon_mission.40317
	title = touhou_paragon_mission.40317.name
	desc = {
		text = touhou_paragon_mission.40317.desc
	}
	picture = GFX_evt_sanae_mission
	show_sound = event_default
	is_triggered_only = yes
	fire_only_once = yes
	event_chain = touhou_sanae_mission_chain
	trigger = {
		has_point_of_interest = {
			poi = touhou_sanae_mission_chain_faith.4
		}
		not = {
			any_country = {
				or = {
					has_ethic = ethic_spiritualist
					has_ethic = ethic_fanatic_spiritualist
				}
				is_ai = yes
				is_subject = no
				not = { is_in_federation_with = root }
				relative_power = {
					who = root
					value >= inferior
					category = fleet
				}
				NOR = {
					has_civic = civic_moriya_shinto
					has_civic = civic_moriya_shinto_corp
				}
				or = {
					is_country_type = default
					is_country_type = fallen_empire
					is_country_type = awakened_fallen_empire
				}
			}
		}
	}
	option = {
		name = touhou_paragon_mission.40317.a
		set_country_flag = can_declare_moriya_war_in_heaven
		add_modifier = {
			modifier = sanae_max_subjects
		}
	}
	after = {
		hidden_effect = {
			update_sanae_phase_trait = yes
			remove_point_of_interest = touhou_sanae_mission_chain_faith.4
			create_point_of_interest = {
				id = touhou_sanae_mission_chain_faith.5
				name = "touhou_sanae_mission_chain_faith_name"
				desc = "touhou_sanae_mission_chain_faith_5_desc"
				event_chain = "touhou_sanae_mission_chain"
			}
		}
	}
}

country_event = {
	id = touhou_paragon_mission.40318
	title = touhou_paragon_mission.40318.name
	desc = {
		text = touhou_paragon_mission.40318.desc
	}
	picture = GFX_evt_sanae_mission
	show_sound = event_default
	is_triggered_only = yes
	fire_only_once = yes
	event_chain = touhou_sanae_mission_chain
	trigger = {
		has_point_of_interest = {
			poi = touhou_sanae_mission_chain_adm.5
		}
		calc_true_if = {
			amount >= 5
			any_owned_megastructure = {
				OR = {
					is_megastructure_type = dyson_sphere_5
					is_megastructure_type = dyson_sphere_restored
				}
			}
			any_owned_megastructure = {
				OR = {
					is_megastructure_type = spy_orb_4
					is_megastructure_type = spy_orb_restored
				}
			}
			any_owned_megastructure = {
				OR = {
					is_megastructure_type = think_tank_3
					is_megastructure_type = think_tank_4
					is_megastructure_type = think_tank_restored
				}
			}
			any_owned_megastructure = {
				OR = {
					is_megastructure_type = matter_decompressor_4
					is_megastructure_type = matter_decompressor_restored
				}
			}
			any_owned_megastructure = {
				OR = {
					is_megastructure_type = strategic_coordination_center_3
					is_megastructure_type = strategic_coordination_center_restored
				}
			}
			any_owned_megastructure = {
				OR = {
					is_megastructure_type = mega_art_installation_3
					is_megastructure_type = mega_art_installation_4
					is_megastructure_type = mega_art_installation_restored
					is_megastructure_type = mega_art_installation_restored_2
				}
			}
			any_owned_megastructure = {
				OR = {
					is_megastructure_type = interstellar_assembly_4
					is_megastructure_type = interstellar_assembly_restored
				}
			}
			any_owned_megastructure = {
				OR = {
					is_megastructure_type = mega_shipyard_3
					is_megastructure_type = mega_shipyard_restored
				}
			}
		}
	}
	option = {
		name = touhou_paragon_mission.40318.e
		if = {
			limit = {
				has_modifier = relic_activation_cooldown
			}
			remove_modifier = relic_activation_cooldown
		}
	}
	option = {
		name = touhou_paragon_mission.40318.b
		allow = {
			or = {
				allowed_crisis_type = prethoryn
				allowed_crisis_type = all
			}
		}
		add_modifier = {
			modifier = modifier_sanae_mission_adm_5_prethoryn
		}
	}
	option = {
		name = touhou_paragon_mission.40318.c
		allow = {
			or = {
				allowed_crisis_type = contingency
				allowed_crisis_type = all
			}
		}
		add_modifier = {
			modifier = modifier_sanae_mission_adm_5_contingency
		}
	}
	option = {
		name = touhou_paragon_mission.40318.d
		allow = {
			or = {
				allowed_crisis_type = unbidden
				allowed_crisis_type = all
			}
		}
		add_modifier = {
			modifier = modifier_sanae_mission_adm_5_unbidden
		}
	}
	option = {
		name = touhou_paragon_mission.40318.f
		allow = {
			or = {
				allowed_crisis_type = synth_queen
				allowed_crisis_type = all
			}
		}
		add_modifier = {
			modifier = modifier_sanae_mission_adm_5_synth_queen
		}
	}
	after = {
		hidden_effect = {
			update_sanae_phase_trait = yes
			remove_point_of_interest = touhou_sanae_mission_chain_adm.5
			create_point_of_interest = {
				id = touhou_sanae_mission_chain_adm.finish
				name = "touhou_sanae_mission_chain_adm_name"
				desc = "touhou_sanae_mission_finish"
				event_chain = "touhou_sanae_mission_chain"
			}
		}
	}
}

country_event = {
	id = touhou_paragon_mission.40319
	title = touhou_paragon_mission.40319.name
	desc = {
		text = touhou_paragon_mission.40319.desc
	}
	picture = GFX_evt_sanae_mission
	show_sound = event_default
	is_triggered_only = yes
	fire_only_once = yes
	event_chain = touhou_sanae_mission_chain
	trigger = {
		has_point_of_interest = {
			poi = touhou_sanae_mission_chain_mil.5
		}
		or = {
			and = {
				check_modifier_value = {
					modifier = weapon_type_energy_weapon_fire_rate_mult
					value >= 1.0
				}
				check_modifier_value = {
					modifier = weapon_type_energy_weapon_damage_mult
					value >= 1.0
				}
			}
			and = {
				check_modifier_value = {
					modifier = weapon_type_strike_craft_weapon_damage_mult
					value >= 2.0
				}
				check_modifier_value = {
					modifier = weapon_type_strike_craft_weapon_fire_rate_mult
					value >= 2.0
				}
			}
			and = {
				check_modifier_value = {
					modifier = weapon_type_explosive_weapon_damage_mult
					value >= 1.0
				}
				check_modifier_value = {
					modifier = weapon_type_explosive_weapon_fire_rate_mult
					value >= 1.0
				}
			}
			and = {
				check_modifier_value = {
					modifier = weapon_type_kinetic_weapon_damage_mult
					value >= 1.0
				}
				check_modifier_value = {
					modifier = weapon_type_kinetic_weapon_fire_rate_mult
					value >= 1.0
				}
			}
		}
	}
	option = {
		name = touhou_paragon_mission.40319.a
		# allow = {
		# 	check_modifier_value = {
		# 		modifier = weapon_type_energy_weapon_fire_rate_mult
		# 		value >= 1.0
		# 	}
		# 	check_modifier_value = {
		# 		modifier = weapon_type_energy_weapon_damage_mult
		# 		value >= 1.0
		# 	}
		# }
		add_research_option = tech_sanae_mission_mil_nova
	}
	# option = {
	# 	name = touhou_paragon_mission.40319.b
	# 	allow = {
	# 		check_modifier_value = {
	# 			modifier = weapon_type_strike_craft_weapon_damage_mult
	# 			value >= 2.0
	# 		}
	# 		check_modifier_value = {
	# 			modifier = weapon_type_strike_craft_weapon_fire_rate_mult
	# 			value >= 2.0
	# 		}
	# 	}
	# 	add_research_option = tech_sanae_mission_mil_glidingsnake
	# }
	option = {
		name = touhou_paragon_mission.40319.c
		allow = {
			check_modifier_value = {
				modifier = weapon_type_explosive_weapon_damage_mult
				value >= 1.0
			}
			check_modifier_value = {
				modifier = weapon_type_explosive_weapon_fire_rate_mult
				value >= 1.0
			}
		}
		add_research_option = tech_sanae_mission_mil_ironwheel
	}
	option = {
		name = touhou_paragon_mission.40319.d
		allow = {
			check_modifier_value = {
				modifier = weapon_type_kinetic_weapon_damage_mult
				value >= 1.0
			}
			check_modifier_value = {
				modifier = weapon_type_kinetic_weapon_fire_rate_mult
				value >= 1.0
			}
		}
		add_research_option = tech_sanae_mission_mil_onbashira
	}
	option = {
		name = touhou_paragon_mission.40319.e
		add_research_option = tech_sanae_mission_mil_nova
		add_research_option = tech_sanae_mission_mil_ironwheel
		add_research_option = tech_sanae_mission_mil_onbashira
	}
	after = {
		hidden_effect = {
			update_sanae_phase_trait = yes
			remove_point_of_interest = touhou_sanae_mission_chain_mil.5
			create_point_of_interest = {
				id = touhou_sanae_mission_chain_mil.finish
				name = "touhou_sanae_mission_chain_mil_name"
				desc = "touhou_sanae_mission_finish"
				event_chain = "touhou_sanae_mission_chain"
			}
		}
	}
}

country_event = {
	id = touhou_paragon_mission.40320
	title = touhou_paragon_mission.40320.name
	desc = {
		text = touhou_paragon_mission.40320.desc
	}
	picture = GFX_evt_sanae_mission
	show_sound = event_default
	is_triggered_only = yes
	fire_only_once = yes
	event_chain = touhou_sanae_mission_chain
	trigger = {
		has_point_of_interest = {
			poi = touhou_sanae_mission_chain_tech.5
		}
		num_repeatable_techs >= 100
	}
	option = {
		name = touhou_paragon_mission.40320.a
		add_monthly_resource_mult = {
			resource = energy
			value = -3
		}
		add_monthly_resource_mult = {
			resource = minerals
			value = -3
		}
		add_monthly_resource_mult = {
			resource = food
			value = -3
		}
		add_monthly_resource_mult = {
			resource = consumer_goods
			value = -3
		}
		add_monthly_resource_mult = {
			resource = alloys
			value = -3
		}
		add_monthly_resource_mult = {
			resource = unity
			value = -3
		}
		add_resource = {
			influence = -50
		}
		country_event = { id = touhou_paragon_mission.40321 }
	}
	option = {
		name = touhou_paragon_mission.40320.b
		add_monthly_resource_mult = {
			resource = energy
			value = -15
		}
		add_monthly_resource_mult = {
			resource = minerals
			value = -15
		}
		add_monthly_resource_mult = {
			resource = food
			value = -15
		}
		add_monthly_resource_mult = {
			resource = consumer_goods
			value = -15
		}
		add_monthly_resource_mult = {
			resource = alloys
			value = -15
		}
		add_monthly_resource_mult = {
			resource = unity
			value = -15
		}
		add_resource = {
			influence = -250
		}
		country_event = { id = touhou_paragon_mission.40322 }
	}
	option = {
		name = touhou_paragon_mission.40320.c
		add_monthly_resource_mult = {
			resource = energy
			value = -30
		}
		add_monthly_resource_mult = {
			resource = minerals
			value = -30
		}
		add_monthly_resource_mult = {
			resource = food
			value = -30
		}
		add_monthly_resource_mult = {
			resource = consumer_goods
			value = -30
		}
		add_monthly_resource_mult = {
			resource = alloys
			value = -30
		}
		add_monthly_resource_mult = {
			resource = unity
			value = -30
		}
		add_resource = {
			influence = -500
		}
		country_event = { id = touhou_paragon_mission.40323 }
	}
	option = {
		name = touhou_paragon_mission.40320.d
		custom_tooltip = "covenant.cycle.tooltip"
		hidden_effect = {
			accept_end_of_the_cycle = yes
		}
	}
	after = {
		hidden_effect = {
			update_sanae_phase_trait = yes
			remove_point_of_interest = touhou_sanae_mission_chain_tech.5
			create_point_of_interest = {
				id = touhou_sanae_mission_chain_tech.finish
				name = "touhou_sanae_mission_chain_tech_name"
				desc = "touhou_sanae_mission_finish"
				event_chain = "touhou_sanae_mission_chain"
			}
		}
	}
}

country_event = {
	id = touhou_paragon_mission.40321
	title = touhou_paragon_mission.40321.name
	desc = {
		text = touhou_paragon_mission.40321.desc
	}
	picture = GFX_evt_sanae_mission
	show_sound = event_default
	is_triggered_only = yes
	event_chain = touhou_sanae_mission_chain
	option = {
		name = touhou_paragon_mission.40321.a
		trigger = {
			not = {
				has_modifier = modifier_sanae_mission_tech_5_s_composer
			}
		}
		add_modifier = {
			modifier = modifier_sanae_mission_tech_5_s_composer
		}
		if = {
			limit = { not = { has_country_flag = touhou_flag_twice_40321} }
			country_event = { id = touhou_paragon_mission.40321 }
		}
	}
	option = {
		name = touhou_paragon_mission.40321.b
		trigger = {
			not = {
				has_modifier = modifier_sanae_mission_tech_5_s_instrument
			}
		}
		add_modifier = {
			modifier = modifier_sanae_mission_tech_5_s_instrument
		}
		if = {
			limit = { not = { has_country_flag = touhou_flag_twice_40321} }
			country_event = { id = touhou_paragon_mission.40321 }
		}
	}
	option = {
		name = touhou_paragon_mission.40321.c
		trigger = {
			not = {
				has_modifier = modifier_sanae_mission_tech_5_s_eater
			}
		}
		add_modifier = {
			modifier = modifier_sanae_mission_tech_5_s_eater
		}
		if = {
			limit = { not = { has_country_flag = touhou_flag_twice_40321} }
			country_event = { id = touhou_paragon_mission.40321 }
		}
	}
	option = {
		name = touhou_paragon_mission.40321.d
		trigger = {
			not = {
				has_modifier = modifier_sanae_mission_tech_5_s_whisperers
			}
		}
		add_modifier = {
			modifier = modifier_sanae_mission_tech_5_s_whisperers
		}
		if = {
			limit = { not = { has_country_flag = touhou_flag_twice_40321} }
			country_event = { id = touhou_paragon_mission.40321 }
		}
	}
	after = {
		set_country_flag = touhou_flag_twice_40321
	}
}

country_event = {
	id = touhou_paragon_mission.40322
	title = touhou_paragon_mission.40322.name
	desc = {
		text = touhou_paragon_mission.40322.desc
	}
	picture = GFX_evt_sanae_mission
	show_sound = event_default
	is_triggered_only = yes
	event_chain = touhou_sanae_mission_chain
	option = {
		name = touhou_paragon_mission.40322.a
		trigger = {
			not = {
				has_modifier = modifier_sanae_mission_tech_5_m_composer
			}
		}
		add_modifier = {
			modifier = modifier_sanae_mission_tech_5_m_composer
		}
		if = {
			limit = { not = { has_country_flag = touhou_flag_twice_40322} }
			country_event = { id = touhou_paragon_mission.40322 }
		}
	}
	option = {
		name = touhou_paragon_mission.40322.b
		trigger = {
			not = {
				has_modifier = modifier_sanae_mission_tech_5_m_instrument
			}
		}
		add_modifier = {
			modifier = modifier_sanae_mission_tech_5_m_instrument
		}
		if = {
			limit = { not = { has_country_flag = touhou_flag_twice_40322} }
			country_event = { id = touhou_paragon_mission.40322 }
		}
	}
	option = {
		name = touhou_paragon_mission.40322.c
		trigger = {
			not = {
				has_modifier = modifier_sanae_mission_tech_5_m_eater
			}
		}
		add_modifier = {
			modifier = modifier_sanae_mission_tech_5_m_eater
		}
		if = {
			limit = { not = { has_country_flag = touhou_flag_twice_40322} }
			country_event = { id = touhou_paragon_mission.40322 }
		}
	}
	option = {
		name = touhou_paragon_mission.40322.d
		trigger = {
			not = {
				has_modifier = modifier_sanae_mission_tech_5_m_whisperers
			}
		}
		add_modifier = {
			modifier = modifier_sanae_mission_tech_5_m_whisperers
		}
		if = {
			limit = { not = { has_country_flag = touhou_flag_twice_40322} }
			country_event = { id = touhou_paragon_mission.40322 }
		}
	}
	after = {
		set_country_flag = touhou_flag_twice_40322
	}
}

country_event = {
	id = touhou_paragon_mission.40323
	title = touhou_paragon_mission.40323.name
	desc = {
		text = touhou_paragon_mission.40323.desc
	}
	picture = GFX_evt_sanae_mission
	show_sound = event_default
	is_triggered_only = yes
	event_chain = touhou_sanae_mission_chain
	option = {
		name = touhou_paragon_mission.40323.a
		trigger = {
			not = {
				has_modifier = modifier_sanae_mission_tech_5_l_composer
			}
		}
		add_modifier = {
			modifier = modifier_sanae_mission_tech_5_l_composer
		}
		if = {
			limit = { not = { has_country_flag = touhou_flag_twice_40323} }
			country_event = { id = touhou_paragon_mission.40323 }
		}
	}
	option = {
		name = touhou_paragon_mission.40323.b
		trigger = {
			not = {
				has_modifier = modifier_sanae_mission_tech_5_l_instrument
			}
		}
		add_modifier = {
			modifier = modifier_sanae_mission_tech_5_l_instrument
		}
		if = {
			limit = { not = { has_country_flag = touhou_flag_twice_40323} }
			country_event = { id = touhou_paragon_mission.40323 }
		}
	}
	option = {
		name = touhou_paragon_mission.40323.c
		trigger = {
			not = {
				has_modifier = modifier_sanae_mission_tech_5_l_eater
			}
		}
		add_modifier = {
			modifier = modifier_sanae_mission_tech_5_l_eater
		}
		if = {
			limit = { not = { has_country_flag = touhou_flag_twice_40323} }
			country_event = { id = touhou_paragon_mission.40323 }
		}
	}
	option = {
		name = touhou_paragon_mission.40323.d
		trigger = {
			not = {
				has_modifier = modifier_sanae_mission_tech_5_l_whisperers
			}
		}
		add_modifier = {
			modifier = modifier_sanae_mission_tech_5_l_whisperers
		}
		if = {
			limit = { not = { has_country_flag = touhou_flag_twice_40323} }
			country_event = { id = touhou_paragon_mission.40323 }
		}
	}
	after = {
		set_country_flag = touhou_flag_twice_40323
	}
}

country_event = {
	id = touhou_paragon_mission.40324
	title = touhou_paragon_mission.40324.name
	desc = {
		text = touhou_paragon_mission.40324.desc
	}
	picture = GFX_evt_sanae_mission
	show_sound = event_default
	is_triggered_only = yes
	fire_only_once = yes
	event_chain = touhou_sanae_mission_chain
	trigger = {
		has_point_of_interest = {
			poi = touhou_sanae_mission_chain_faith.5
		}
		count_owned_planet = {
			limit = {
				has_planetary_ascension_tier >= 10
			}
			count >= 5
		}
	}
	option = {
		name = touhou_paragon_mission.40324.a
		add_modifier = {
			modifier = modifier_sanae_mission_faith_5
		}
		set_country_flag = touhou_flag_sanae_ascension
		custom_tooltip = SANAE_UNLOCK_AGENDA
	}

	after = {
		hidden_effect = {
			update_sanae_phase_trait = yes
			remove_point_of_interest = touhou_sanae_mission_chain_faith.5
			create_point_of_interest = {
				id = touhou_sanae_mission_chain_faith.finish
				name = "touhou_sanae_mission_chain_faith_name"
				desc = "touhou_sanae_mission_finish"
				event_chain = "touhou_sanae_mission_chain"
			}
		}
	}
}

country_event = {
	id = touhou_paragon_mission.40325
	title = touhou_paragon_mission.40325.name
	desc = {
		text = touhou_paragon_mission.40325.desc
	}
	picture = GFX_evt_sanae_mission
	show_sound = event_default
	is_triggered_only = yes
	fire_only_once = yes
	event_chain = touhou_sanae_mission_chain
	trigger = {
		has_point_of_interest = {
			poi = touhou_sanae_mission_chain_adm.finish
		}
		has_point_of_interest = {
			poi = touhou_sanae_mission_chain_mil.finish
		}
		has_point_of_interest = {
			poi = touhou_sanae_mission_chain_tech.finish
		}
		has_point_of_interest = {
			poi = touhou_sanae_mission_chain_faith.finish
		}
		any_owned_leader = {
			OR = {
				has_trait = thl_leader_trait_snake_bless
				has_trait = thl_leader_trait_snake_bless_2
				has_trait = thl_leader_trait_snake_bless_3
			}
			OR = {
				has_trait = thl_leader_trait_frog_bless
				has_trait = thl_leader_trait_frog_bless_2
				has_trait = thl_leader_trait_frog_bless_3
			}
		}
	}
	option = {
		name = touhou_paragon_mission.40325.a
		every_owned_leader = {
			limit = {
				has_trait = thl_leader_trait_miracle
				OR = {
					has_trait = thl_leader_trait_snake_bless
					has_trait = thl_leader_trait_snake_bless_2
					has_trait = thl_leader_trait_snake_bless_3
				}
				OR = {
					has_trait = thl_leader_trait_frog_bless
					has_trait = thl_leader_trait_frog_bless_2
					has_trait = thl_leader_trait_frog_bless_3
				}
			}
			if = {
				limit = {
					has_trait = thl_leader_trait_snake_bless
				}
				remove_trait = thl_leader_trait_snake_bless
			}
			if = {
				limit = {
					has_trait = thl_leader_trait_snake_bless_2
				}
				remove_trait = thl_leader_trait_snake_bless_2
			}
			if = {
				limit = {
					has_trait = thl_leader_trait_snake_bless_3
				}
				remove_trait = thl_leader_trait_snake_bless_3
			}
			if = {
				limit = {
					has_trait = thl_leader_trait_frog_bless
				}
				remove_trait = thl_leader_trait_frog_bless
			}
			if = {
				limit = {
					has_trait = thl_leader_trait_frog_bless_2
				}
				remove_trait = thl_leader_trait_frog_bless_2
			}
			if = {
				limit = {
					has_trait = thl_leader_trait_frog_bless_3
				}
				remove_trait = thl_leader_trait_frog_bless_3
			}
			remove_trait = thl_leader_trait_sanae_phase4
			add_trait = { trait = thl_leader_trait_sanae_complete }
			if = {
				limit = {
					has_trait = thl_leader_trait_regeneration
				}
				remove_trait = thl_leader_trait_regeneration
			}
			if = {
				limit = {
					has_trait = thl_leader_trait_regeneration_2
				}
				remove_trait = thl_leader_trait_regeneration_2
			}
			if = {
				limit = {
					NOT = {
						has_trait = thl_leader_trait_regeneration_3
					}
				}
				add_trait = { trait = thl_leader_trait_regeneration_3 }
			}
		}
	}
	after = {
		hidden_effect = {
			end_event_chain = "touhou_sanae_mission_chain"
		}
	}
}

country_event = {
	id = touhou_paragon_mission.40399
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		country_event = { id = touhou_paragon_mission.40302 days = 1 random = 30 }
		country_event = { id = touhou_paragon_mission.40303 days = 1 random = 30 }
        country_event = { id = touhou_paragon_mission.40304 days = 1 random = 30 }
		country_event = { id = touhou_paragon_mission.40305 days = 1 random = 30 }
		country_event = { id = touhou_paragon_mission.40306 days = 1 random = 30 }
		country_event = { id = touhou_paragon_mission.40307 days = 1 random = 30 }
		country_event = { id = touhou_paragon_mission.40308 days = 1 random = 30 }
		country_event = { id = touhou_paragon_mission.40309 days = 1 random = 30 }
		country_event = { id = touhou_paragon_mission.40310 days = 1 random = 30 }
		country_event = { id = touhou_paragon_mission.40311 days = 1 random = 30 }
		country_event = { id = touhou_paragon_mission.40312 days = 1 random = 30 }
		country_event = { id = touhou_paragon_mission.40313 days = 1 random = 30 }
		country_event = { id = touhou_paragon_mission.40314 days = 1 random = 30 }
		country_event = { id = touhou_paragon_mission.40316 days = 1 random = 30 }
		country_event = { id = touhou_paragon_mission.40317 days = 1 random = 30 }
		country_event = { id = touhou_paragon_mission.40318 days = 1 random = 30 }
		country_event = { id = touhou_paragon_mission.40319 days = 1 random = 30 }
		country_event = { id = touhou_paragon_mission.40320 days = 1 random = 30 }
		country_event = { id = touhou_paragon_mission.40324 days = 1 random = 30 }
		country_event = { id = touhou_paragon_mission.40325 days = 1 random = 30 }
		country_event = { id = touhou_paragon_mission.40390 days = 1 random = 30 }
	}
}

country_event = {
	id = touhou_paragon_mission.40390
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		any_owned_leader = {
			has_trait = thl_leader_trait_miracle
			has_leader_flag = thl_flag_mission_order_faction
		}
	}

	immediate = {
		remove_country_flag = thl_egalitarian_leading
		remove_country_flag = thl_authoritarian_leading
		remove_country_flag = thl_militarist_leading
		remove_country_flag = thl_pacifist_leading
		remove_country_flag = thl_xenophile_leading
		remove_country_flag = thl_xenophobe_leading
		remove_country_flag = thl_spiritualist_leading
		remove_country_flag = thl_materialist_leading
		ordered_owned_pop_group = {
			position = 0
			order_by = trigger:pop_amount
			switch = {
				trigger = pop_group_has_ethic
				ethic_egalitarian = {
					root = { set_country_flag = thl_egalitarian_leading }
				}
				ethic_authoritarian = {
					root = { set_country_flag = thl_authoritarian_leading }
				}
				ethic_militarist = {
					root = { set_country_flag = thl_militarist_leading }
				}
				ethic_pacifist = {
					root = { set_country_flag = thl_pacifist_leading }
				}
				ethic_xenophile = {
					root = { set_country_flag = thl_xenophile_leading }
				}
				ethic_xenophobe = {
					root = { set_country_flag = thl_xenophobe_leading }
				}
				ethic_spiritualist = {
					root = { set_country_flag = thl_spiritualist_leading }
				}
				ethic_materialist = {
					root = { set_country_flag = thl_materialist_leading }
				}
			}
		}
	}
}